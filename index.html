<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Encryption by itay-grudev</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Encryption</h1>
        <p>A simple wrapper for the OpenSSL Cipher library for Ruby and Rails applications. Distributed as a Gem through Rubygems.</p>

        <p class="view"><a href="https://github.com/itay-grudev/encryption">View the Project on GitHub <small>itay-grudev/encryption</small></a></p>


        <ul>
          <li><a href="https://github.com/itay-grudev/encryption/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/itay-grudev/encryption/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/itay-grudev/encryption">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="encryption" class="anchor" href="#encryption" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Encryption</h1>

<p><a href="http://badge.fury.io/rb/encryption"><img src="https://badge.fury.io/rb/encryption.png" alt="Gem Version"></a>
<a href="https://codeclimate.com/github/Itehnological/encryption"><img src="https://codeclimate.com/github/Itehnological/encryption.png" alt="Code Climate"></a>
<a href="https://travis-ci.org/itay-grudev/encryption"><img src="https://travis-ci.org/itay-grudev/encryption.png?branch=master" alt="Build Status"></a></p>

<p>A simple to use wrapper of the Ruby OpenSSL Cipher library for Ruby and Rails applications.
This gem provides an easy to use interface for symmetrical and asymmetrical encryption using RSA.</p>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Documentation</h2>

<p>Additional documentation and class reference can be found in the <a href="https://github.com/itay-grudev/encryption/wiki">Wiki section</a> of the repository.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>Install the gem</p>

<div class="highlight highlight-source-shell"><pre>gem install encryption</pre></div>

<p>or add it to your <code>Gemfile</code></p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-k">gem</span> <span class="pl-s"><span class="pl-pds">'</span>encryption<span class="pl-pds">'</span></span></pre></div>

<h2>
<a id="symmetric-encryption" class="anchor" href="#symmetric-encryption" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Symmetric encryption</h2>

<h3>
<a id="using-the-global-instance-of-the-encryption-class" class="anchor" href="#using-the-global-instance-of-the-encryption-class" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using the global instance of the Encryption class</h3>

<p>A simple example of how this gem works:</p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-c1">Encryption</span>.key <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>A very long encryption key<span class="pl-pds">'</span></span>
data <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>secret data<span class="pl-pds">'</span></span>
encrypted_str <span class="pl-k">=</span> <span class="pl-c1">Encryption</span>.encrypt( data )
<span class="pl-c1">Encryption</span>.decrypt( encrypted_str ) <span class="pl-k">==</span> data <span class="pl-c"># true</span></pre></div>

<h3>
<a id="using-your-own-instance-of-the-encryption-class" class="anchor" href="#using-your-own-instance-of-the-encryption-class" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using your own instance of the Encryption class</h3>

<p>If you need a separate instance with custom settings, different than the global Encryption instance, here is how you can do it:</p>

<div class="highlight highlight-source-ruby"><pre>encryptor <span class="pl-k">=</span> <span class="pl-c1">Encryption</span>::<span class="pl-c1">Symmetric</span>.<span class="pl-k">new</span>
encryptor.key <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>A very long encryption key<span class="pl-pds">'</span></span>
data <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>secret data<span class="pl-pds">'</span></span>
encrypted_str <span class="pl-k">=</span> encryptor.encrypt( data )
encryptor.decrypt( encrypted_str ) <span class="pl-k">==</span> data <span class="pl-c"># true</span></pre></div>

<h3>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h3>

<p>For symmetric encryption/decryption you need to set an encryption key. You can also optionally set an initialization vector and a cipher.</p>

<p><code>Encryption.key</code> - Your encryption key<br>
<code>Encryption.iv # Optional</code> - Encryption initialization vector. Defaults to the character <code>"\0"</code> <em>(Optional)</em><br>
<code>Encryption.cipher # Optional</code> - Your encryption algorithm. Defaults to <code>aes-256-cbc</code> <em>(Optional)</em></p>

<p>Running <code>openssl list-cipher-commands</code> in the terminal or calling <code>OpenSSL::Cipher.ciphers</code> in <em>Ruby</em>, which list all available ciphers.</p>

<p>You can configure both the global instance and a other instances with a <em>block</em> like this:</p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-c1">Encryption</span>.config <span class="pl-k">do </span>|<span class="pl-smi">e</span>|
    e.key <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Don<span class="pl-pds">'</span></span>t look!<span class="pl-s"><span class="pl-pds">'</span></span>
<span class="pl-s">    e.iv = <span class="pl-pds">'</span></span><span class="pl-c1">This</span> is probably the easiest way to use <span class="pl-c1">OpenSSL</span> <span class="pl-k">in</span> <span class="pl-c1">Ruby</span><span class="pl-s"><span class="pl-pds">'</span></span>
<span class="pl-s">    e.cipher = <span class="pl-pds">'</span></span>camellia<span class="pl-k">-</span><span class="pl-c1">128</span><span class="pl-k">-</span>ecb<span class="pl-s"><span class="pl-pds">'</span> # if you<span class="pl-pds">'</span></span>re feeling adventurous
<span class="pl-k">end</span></pre></div>

<h2>
<a id="asymmetric-encryption-publicprivate-key-encryption" class="anchor" href="#asymmetric-encryption-publicprivate-key-encryption" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Asymmetric encryption (public/private key encryption)</h2>

<p>The <code>encryption</code> gem also provides a DSL for asymmetric encryption.</p>

<h3>
<a id="generating-keypair" class="anchor" href="#generating-keypair" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Generating keypair</h3>

<div class="highlight highlight-source-ruby"><pre>keypair <span class="pl-k">=</span> <span class="pl-c1">Encryption</span>::<span class="pl-c1">Keypair</span>.<span class="pl-k">new</span> <span class="pl-c"># Accepts two optional arguments: size = 2048, password = nil</span>
keypair.public_key <span class="pl-c"># Instance of Encryption::PublicKey</span>
keypair.private_key <span class="pl-c"># Instance of Encryption::PrivateKey</span>
<span class="pl-c"># Or you can use this shorter version</span>
public_key, private_key <span class="pl-k">=</span> <span class="pl-c1">Encryption</span>::<span class="pl-c1">Keypair</span>.generate( <span class="pl-c1">2048</span> )

<span class="pl-c"># You can dump keys to string</span>
private_key.to_s

<span class="pl-c"># or export them to PEM format</span>
private_key.to_pem

<span class="pl-c"># and optionally encrypt them with a passphrase</span>
private_key.to_pem( <span class="pl-s"><span class="pl-pds">'</span>passphrase<span class="pl-pds">'</span></span> )</pre></div>

<h3>
<a id="encryptionpublickey-and-encryptionprivatekey" class="anchor" href="#encryptionpublickey-and-encryptionprivatekey" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Encryption::PublicKey</code> and <code>Encryption::PrivateKey</code>
</h3>

<p>Both classes have the same methods:</p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># Import an existing key</span>
<span class="pl-c1">Encryption</span>::<span class="pl-c1">PrivateKey</span>.<span class="pl-k">new</span>( filename[, password] ) <span class="pl-c"># Import from file</span>
<span class="pl-c1">Encryption</span>::<span class="pl-c1">PrivateKey</span>.<span class="pl-k">new</span>( string[, password] ) <span class="pl-c"># Import from string</span>

<span class="pl-c"># Encrypt / Decrypt data</span>
public_key <span class="pl-k">=</span> <span class="pl-c1">Encryption</span>::<span class="pl-c1">PublicKey</span>.<span class="pl-k">new</span>( <span class="pl-s"><span class="pl-pds">'</span>existing key<span class="pl-pds">'</span></span> )
public_key.encrypt( <span class="pl-s"><span class="pl-pds">'</span>some secret data<span class="pl-pds">'</span></span> )
public_key.decrypt( <span class="pl-s"><span class="pl-pds">"</span>some encrypted data<span class="pl-pds">"</span></span> )</pre></div>

<p><em>Note: You can use both the public and the private key to encrypt or decrypt data.</em></p>

<h2>
<a id="helpers" class="anchor" href="#helpers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Helpers</h2>

<h3>
<a id="string-helper" class="anchor" href="#string-helper" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>String helper</h3>

<p>The gem adds the <code>encrypt</code> and <code>decrypt</code> methods to the <code>String</code> performing symmetric encryption. You can use them as follows:</p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-c"># With the global Encryption instance</span>
<span class="pl-s"><span class="pl-pds">'</span>Hello<span class="pl-pds">'</span></span>.encrypt
<span class="pl-s"><span class="pl-pds">'</span>Hello<span class="pl-pds">'</span></span>.encrypt!
<span class="pl-s"><span class="pl-pds">'</span>h3LL0<span class="pl-pds">'</span></span>.decrypt
<span class="pl-s"><span class="pl-pds">'</span>h3LL0<span class="pl-pds">'</span></span>.decrypt!

<span class="pl-c"># With custom settings (and custom encryptor instance)</span>
<span class="pl-s"><span class="pl-pds">'</span>secret<span class="pl-pds">'</span></span>.encrypt( <span class="pl-c1">key:</span> <span class="pl-s"><span class="pl-pds">'</span>encryption key<span class="pl-pds">'</span></span>, <span class="pl-c1">iv:</span> <span class="pl-s"><span class="pl-pds">'</span>initialization vector<span class="pl-pds">'</span></span>, <span class="pl-c1">cipher:</span> <span class="pl-s"><span class="pl-pds">'</span>encryption cipher<span class="pl-pds">'</span></span>, <span class="pl-c1">encode:</span> <span class="pl-c1">true</span> )
<span class="pl-c"># Note the encode option which will result in a base64 encoded string</span>

<span class="pl-s"><span class="pl-pds">'</span>encrypted data<span class="pl-pds">'</span></span>.decrypt( <span class="pl-c1">encoded:</span> <span class="pl-c1">true</span> ) <span class="pl-c"># Will decrypt a base64 encoded string</span>

<span class="pl-c"># Or with a custom encryptor</span>
encryptor <span class="pl-k">=</span> <span class="pl-c1">Encryption</span>::<span class="pl-c1">Symmetric</span>.<span class="pl-k">new</span>
encryptor.key <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>encryption key<span class="pl-pds">'</span></span>
<span class="pl-s"><span class="pl-pds">'</span>secret data<span class="pl-pds">'</span></span>.encrypt( <span class="pl-c1">encryptor:</span> encryptor )</pre></div>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>This gem is distributed under The MIT License.</p>

<h2>
<a id="author" class="anchor" href="#author" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Author</h2>

<p>Itay Grudev &lt;itay(at)grudev...com&gt;</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/itay-grudev">itay-grudev</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
